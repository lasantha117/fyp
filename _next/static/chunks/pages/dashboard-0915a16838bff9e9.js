(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{3649:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var l=s(7876),n=s(4232),c=s(9099),i=s(9917),r=s(5940);function t(e){let{isOpen:a,onClose:s,onSave:c,currentUserId:i}=e,[t,d]=(0,n.useState)({Job_Title:"",Company_Name:"",Job_Description:"",Required_Skills:"",Education_Level:"",Experience_Required:"",Location:"",companyUserId:i||""}),[o,m]=(0,n.useState)("");(0,n.useEffect)(()=>{d(e=>({...e,companyUserId:i||""}))},[i]),(0,n.useEffect)(()=>{a&&(d({Job_Title:"",Company_Name:"",Job_Description:"",Required_Skills:"",Education_Level:"",Experience_Required:"",Location:"",companyUserId:i||""}),m(""))},[a,i]);let h=e=>{let{name:a,value:s}=e.target;d(e=>({...e,[a]:s}))},b=async e=>{if(e.preventDefault(),m("Saving vacancy..."),!i){m("Error: User not authenticated. Cannot add vacancy.");return}let a=(0,r.C3)(),s=(0,r.KR)(a,"jobs");try{await (0,r.VC)(s,t),m("Vacancy added successfully!"),c()}catch(e){console.error("Error adding vacancy:",e),m("Error: ".concat(e.message))}};return a?(0,l.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:(0,l.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,l.jsx)("h5",{className:"modal-title",children:"Add New Job Vacancy"}),(0,l.jsx)("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:s})]}),(0,l.jsxs)("div",{className:"modal-body",children:[(0,l.jsxs)("form",{onSubmit:b,children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Job_Title",className:"form-label",children:"Job Title"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Job_Title",name:"Job_Title",value:t.Job_Title,onChange:h,required:!0})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Company_Name",className:"form-label",children:"Company Name"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Company_Name",name:"Company_Name",value:t.Company_Name,onChange:h,required:!0})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Job_Description",className:"form-label",children:"Job Description"}),(0,l.jsx)("textarea",{className:"form-control",id:"Job_Description",name:"Job_Description",rows:"3",value:t.Job_Description,onChange:h,required:!0})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Required_Skills",className:"form-label",children:"Required Skills (comma-separated)"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Required_Skills",name:"Required_Skills",value:t.Required_Skills,onChange:h})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Education_Level",className:"form-label",children:"Education Level"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Education_Level",name:"Education_Level",value:t.Education_Level,onChange:h})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Experience_Required",className:"form-label",children:"Experience Required"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Experience_Required",name:"Experience_Required",value:t.Experience_Required,onChange:h})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"Location",className:"form-label",children:"Location"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Location",name:"Location",value:t.Location,onChange:h})]}),(0,l.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary me-2",onClick:s,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Vacancy"})]})]}),o&&(0,l.jsx)("div",{className:"alert ".concat(o.includes("Error")?"alert-danger":"alert-success"," mt-3"),children:o})]})]})})}):null}var d=s(9366);function o(){let e=(0,c.useRouter)(),a=(0,i.xI)(),[s,o]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),[b,u]=(0,n.useState)(0),[x,p]=(0,n.useState)([]),[v,j]=(0,n.useState)(0),[N,y]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let s=(0,i.hg)(a,a=>{a?(o(a),g(a.uid)):(o(null),e.push("/login"))});return()=>s()},[a,e]);let g=e=>{y(!0);let a=(0,r.C3)(),s=(0,r.KR)(a,"jobs");(0,r.Zy)(s,a=>{let s=a.val(),l=[];if(s)for(let a in s){let n={id:a,...s[a]};n.companyUserId===e&&l.push(n)}u(l.length),p(l.slice(0,5)),y(!1)},e=>{console.error("Error fetching my vacancies data:",e),y(!1)});let l=(0,r.KR)(a,"applications");(0,r.Zy)(l,a=>{let s=a.val(),l=0;if(s)for(let a in s)s[a].companyUserId===e&&l++;j(l)},e=>{console.error("Error fetching applications data:",e)})},f=async()=>{try{await (0,i.CI)(a),e.push("/login")}catch(e){console.error("Error logging out:",e),alert("Failed to log out. Please try again.")}};return N&&!s?(0,l.jsxs)("div",{className:"container mt-5 text-center",children:[(0,l.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,l.jsx)("p",{className:"mt-2",children:"Loading dashboard..."})]}):s?(0,l.jsxs)("div",{children:[(0,l.jsx)(d.A,{onLogout:f,userEmail:null==s?void 0:s.email}),(0,l.jsxs)("div",{className:"container mt-5",children:[(0,l.jsxs)("div",{className:"card shadow",children:[(0,l.jsxs)("div",{className:"card-header bg-primary text-white text-center",children:[(0,l.jsx)("h2",{children:"Company Dashboard"}),(0,l.jsxs)("p",{className:"mb-0",children:["Welcome, ",(null==s?void 0:s.email)||"Company User","!"]})]}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("p",{className:"lead text-center mb-4",children:"Manage your job vacancies and view candidate applications."}),(0,l.jsxs)("div",{className:"row mb-5",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsxs)("div",{className:"card text-white bg-success mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"My Live Vacancies"}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h5",{className:"card-title display-4",children:b}),(0,l.jsx)("p",{className:"card-text",children:"Number of active job postings by your company."})]})]})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsxs)("div",{className:"card text-white bg-info mb-3",children:[(0,l.jsx)("div",{className:"card-header",children:"Applications Received"}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h5",{className:"card-title display-4",children:v}),(0,l.jsx)("p",{className:"card-text",children:"Total applications for your company's jobs."}),(0,l.jsx)("button",{className:"btn btn-light btn-sm mt-2",onClick:()=>{e.push("/company-applications")},children:"View Applications"})]})]})})]}),(0,l.jsxs)("div",{className:"d-grid gap-3 col-md-8 mx-auto mb-5",children:[(0,l.jsx)("button",{className:"btn btn-success btn-lg",onClick:()=>{h(!0)},children:"Add New Vacancy"}),(0,l.jsx)("button",{className:"btn btn-primary btn-lg",onClick:()=>{e.push("/view-vacancies")},children:"View My Vacancies"}),(0,l.jsx)("button",{className:"btn btn-secondary btn-lg",onClick:()=>{window.open("/all-vacancies","_blank")},children:"View All Platform Vacancies"})]}),(0,l.jsxs)("div",{className:"mt-5",children:[(0,l.jsx)("h4",{className:"mb-3",children:"Recent Vacancies Added by Your Company"}),x.length>0?(0,l.jsx)("ul",{className:"list-group",children:x.map(a=>(0,l.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:a.Job_Title})," at ",a.Company_Name,(0,l.jsx)("br",{}),(0,l.jsx)("small",{className:"text-muted",children:a.Location})]}),(0,l.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>e.push("/view-vacancies?editId=".concat(a.id)),children:"Manage"})]},a.id))}):(0,l.jsx)("p",{className:"text-muted",children:"No recent vacancies added by your company."})]}),(0,l.jsxs)("div",{className:"mt-5 border-top pt-4",children:[(0,l.jsx)("h4",{children:"Analytics & Reports (Coming Soon)"}),(0,l.jsx)("p",{className:"text-muted",children:"Detailed insights into your job postings and application trends will appear here."})]})]})]}),(0,l.jsx)(t,{isOpen:m,onClose:()=>{h(!1)},onSave:()=>{console.log("Vacancy added successfully!"),h(!1),s&&g(s.uid)},currentUserId:null==s?void 0:s.uid})]})]}):null}s(5538)},5372:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(3649)}])},5538:(e,a,s)=>{"use strict";var l=s(6042),n=s(5940),c=s(9917),i=s(5226);let r=(0,l.Wp)({apiKey:"AIzaSyDfp_Ya2eIUMFRg0Ub1ICsgvKqPMoWk4lM",authDomain:"fyp-bbe4d.firebaseapp.com",databaseURL:"https://fyp-bbe4d-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fyp-bbe4d",storageBucket:"fyp-bbe4d.firebasestorage.app",messagingSenderId:"75697914820",appId:"1:75697914820:web:7bab142f2d6313cf1c1a91"});(0,n.C3)(r),(0,c.xI)(r),(0,i.c7)(r)},9366:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var l=s(7876),n=s(4232),c=s(8230),i=s.n(c),r=s(9917),t=s(5940);function d(e){let{onLogout:a,userEmail:s}=e,[c,d]=(0,n.useState)(null),o=(0,r.xI)(),m=(0,t.C3)();return(0,n.useEffect)(()=>{let e=(0,r.hg)(o,async e=>{if(e){let a=(0,t.KR)(m,"users/".concat(e.uid,"/role")),s=await (0,t.Jt)(a);s.exists()?d(s.val()):d(null)}else d(null)});return()=>e()},[o,m]),(0,l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:(0,l.jsxs)("div",{className:"container-fluid",children:["company"===c?(0,l.jsx)(i(),{href:"/dashboard",className:"navbar-brand",children:"Company Portal"}):"candidate"===c?(0,l.jsx)(i(),{href:"/candidate-dashboard",className:"navbar-brand",children:"Candidate Portal"}):(0,l.jsx)(i(),{href:"/",className:"navbar-brand",children:"Job Matching Platform"}),(0,l.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,l.jsx)("span",{className:"navbar-toggler-icon"})}),(0,l.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[(0,l.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:["company"===c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/dashboard",className:"nav-link",children:"Dashboard"})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/all-vacancies",className:"nav-link",target:"_blank",rel:"noopener noreferrer",children:"All Vacancies"})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/view-vacancies",className:"nav-link",children:"My Vacancies"})})]}),"candidate"===c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/candidate-dashboard",className:"nav-link",children:"Dashboard"})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/resume-matcher",className:"nav-link",children:"Platform Job Matcher"})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/topjobs-matcher",className:"nav-link",children:"TopJobs.lk Matcher"})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/all-vacancies",className:"nav-link",target:"_blank",rel:"noopener noreferrer",children:"View All Jobs"})})]}),!c&&(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)(i(),{href:"/",className:"nav-link",children:"Home"})})]}),(0,l.jsxs)("ul",{className:"navbar-nav",children:[s&&(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsxs)("span",{className:"nav-link text-white-50",children:["Signed in as: ",s]})}),(0,l.jsx)("li",{className:"nav-item",children:(0,l.jsx)("button",{className:"btn btn-outline-light ms-2",onClick:a,children:"Logout"})})]})]})]})})}s(5538)}},e=>{var a=a=>e(e.s=a);e.O(0,[7,166,3,230,636,593,792],()=>a(5372)),_N_E=e.O()}]);