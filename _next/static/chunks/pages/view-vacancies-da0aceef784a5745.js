(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{5538:(e,a,n)=>{"use strict";var s=n(6042),l=n(5940),t=n(9917),r=n(5226);let c=(0,s.Wp)({apiKey:"AIzaSyDfp_Ya2eIUMFRg0Ub1ICsgvKqPMoWk4lM",authDomain:"fyp-bbe4d.firebaseapp.com",databaseURL:"https://fyp-bbe4d-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fyp-bbe4d",storageBucket:"fyp-bbe4d.appspot.com",messagingSenderId:"75697914820",appId:"1:75697914820:web:7bab142f2d6313cf1c1a91"});(0,l.C3)(c),(0,t.xI)(c),(0,r.c7)(c)},5759:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>d});var s=n(7876),l=n(4232),t=n(5940),r=n(9099),c=n(9917),i=n(9366);function d(){let[e,a]=(0,l.useState)([]),[n,d]=(0,l.useState)(!0),[o,h]=(0,l.useState)(""),[m,u]=(0,l.useState)(null),[x,b]=(0,l.useState)(null),[j,v]=(0,l.useState)({}),p=(0,r.useRouter)(),N=(0,c.xI)();(0,l.useEffect)(()=>{let e=(0,c.hg)(N,e=>{e?u(e):(u(null),p.push("/login"))});return()=>e()},[N,p]),(0,l.useEffect)(()=>{if(!m)return;let e=(0,t.C3)(),n=(0,t.KR)(e,"jobs"),s=(0,t.Zy)(n,e=>{let n=e.val(),s=[];if(n)for(let e in n){let a={id:e,...n[e]};a.companyUserId===m.uid&&s.push(a)}a(s),d(!1),h("")},e=>{console.error("Error fetching my vacancies:",e),h("Failed to load your vacancies. Please check console."),d(!1)});return()=>s()},[m]);let f=async e=>{if(window.confirm("Are you sure you want to delete this vacancy?")){let a=(0,t.C3)(),n=(0,t.KR)(a,"jobs/".concat(e));try{await (0,t.TF)(n),alert("Vacancy deleted successfully!")}catch(e){console.error("Error deleting vacancy:",e),alert("Failed to delete vacancy: ".concat(e.message))}}},g=e=>{b(e.id),v(e)},y=e=>{let{name:a,value:n}=e.target;v(e=>({...e,[a]:n}))},k=async()=>{if(!x)return;let e=(0,t.C3)(),a=(0,t.KR)(e,"jobs/".concat(x));try{await (0,t.yo)(a,j),alert("Vacancy updated successfully!"),b(null),v({})}catch(e){console.error("Error updating vacancy:",e),alert("Failed to update vacancy: ".concat(e.message))}},_=()=>{b(null),v({})},C=async()=>{try{await (0,c.CI)(N),p.push("/login")}catch(e){console.error("Error logging out:",e),alert("Failed to log out. Please try again.")}};return!m||n?(0,s.jsxs)("div",{className:"container mt-5 text-center",children:[(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,s.jsx)("p",{className:"mt-2",children:"Loading your vacancies..."})]}):o?(0,s.jsx)("div",{className:"container mt-5 alert alert-danger",children:o}):(0,s.jsxs)("div",{children:[(0,s.jsx)(i.A,{onLogout:C,userEmail:null==m?void 0:m.email}),(0,s.jsxs)("div",{className:"container mt-5",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsx)("h2",{children:"My Vacancies"}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>p.push("/dashboard"),children:"Back to Dashboard"})]}),0===e.length?(0,s.jsx)("div",{className:"alert alert-info text-center",role:"alert",children:"You have not added any vacancies yet."}):(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-striped table-hover align-middle",children:[(0,s.jsx)("thead",{className:"table-dark",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Job Title"}),(0,s.jsx)("th",{children:"Company"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"Skills"}),(0,s.jsx)("th",{children:"Education"}),(0,s.jsx)("th",{children:"Experience"}),(0,s.jsx)("th",{children:"Location"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsx)("tr",{children:x===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Job_Title",value:j.Job_Title||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Company_Name",value:j.Company_Name||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("textarea",{className:"form-control",name:"Job_Description",rows:"2",value:j.Job_Description||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Required_Skills",value:j.Required_Skills||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Education_Level",value:j.Education_Level||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Experience_Required",value:j.Experience_Required||"",onChange:y})}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",className:"form-control",name:"Location",value:j.Location||"",onChange:y})}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{className:"btn btn-success btn-sm me-2",onClick:k,children:"Save"}),(0,s.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:_,children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{children:e.Job_Title}),(0,s.jsx)("td",{children:e.Company_Name}),(0,s.jsx)("td",{children:e.Job_Description}),(0,s.jsx)("td",{children:e.Required_Skills||"N/A"}),(0,s.jsx)("td",{children:e.Education_Level||"N/A"}),(0,s.jsx)("td",{children:e.Experience_Required||"N/A"}),(0,s.jsx)("td",{children:e.Location||"N/A"}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>g(e),children:"Edit"}),(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>f(e.id),children:"Delete"})]})]})},e.id))})]})})]})]})}n(5538)},9366:(e,a,n)=>{"use strict";n.d(a,{A:()=>d});var s=n(7876),l=n(4232),t=n(8230),r=n.n(t),c=n(9917),i=n(5940);function d(e){let{onLogout:a,userEmail:n}=e,[t,d]=(0,l.useState)(null),o=(0,c.xI)(),h=(0,i.C3)();return(0,l.useEffect)(()=>{let e=(0,c.hg)(o,async e=>{if(e){let a=(0,i.KR)(h,"users/".concat(e.uid,"/role")),n=await (0,i.Jt)(a);n.exists()?d(n.val()):d(null)}else d(null)});return()=>e()},[o,h]),(0,s.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:(0,s.jsxs)("div",{className:"container-fluid",children:["company"===t?(0,s.jsx)(r(),{href:"/dashboard",className:"navbar-brand",children:"Company Portal"}):"candidate"===t?(0,s.jsx)(r(),{href:"/candidate-dashboard",className:"navbar-brand",children:"Candidate Portal"}):(0,s.jsx)(r(),{href:"/",className:"navbar-brand",children:"Job Matching Platform"}),(0,s.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,s.jsx)("span",{className:"navbar-toggler-icon"})}),(0,s.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[(0,s.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:["company"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/dashboard",className:"nav-link",children:"Dashboard"})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/all-vacancies",className:"nav-link",target:"_blank",rel:"noopener noreferrer",children:"All Vacancies"})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/view-vacancies",className:"nav-link",children:"My Vacancies"})})]}),"candidate"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/candidate-dashboard",className:"nav-link",children:"Dashboard"})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/resume-matcher",className:"nav-link",children:"Platform Job Matcher"})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/topjobs-matcher",className:"nav-link",children:"TopJobs.lk Matcher"})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/all-vacancies",className:"nav-link",target:"_blank",rel:"noopener noreferrer",children:"View All Jobs"})})]}),!t&&(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(r(),{href:"/",className:"nav-link",children:"Home"})})]}),(0,s.jsxs)("ul",{className:"navbar-nav",children:[n&&(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsxs)("span",{className:"nav-link text-white-50",children:["Signed in as: ",n]})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("button",{className:"btn btn-outline-light ms-2",onClick:a,children:"Logout"})})]})]})]})})}n(5538)},9476:(e,a,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-vacancies",function(){return n(5759)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[7,166,3,230,636,593,792],()=>a(9476)),_N_E=e.O()}]);